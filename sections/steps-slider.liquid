<section data-section-id="{{ section.id }}"  id="section-{{ section.id }}" class="steps-slider-section steps-slider-main-section">
    {% if section.settings.title != blank %}
        <h3>{{ section.settings.title }}</h3>
    {% endif %}

    <div class="steps-slider page-width {% if section.settings.image_position == 'left' %}position-reverse{% endif %}" data-speed-slide="{{ section.settings.step_speed }}" data-points-style="{{ section.settings.style_points }}">
        {% for block in section.blocks %}
            <div class="step-content">
                <div class="step-content-wrappper">
                    <div class="step-title-wrappper">
                        {% if block.settings.step_title != blank %}
                            <h4>{{ block.settings.step_title }}</h4>
                        {% endif %}
                        {% if block.settings.step_text != blank %}
                            <p>{{ block.settings.step_text }}</p>
                        {% endif %}
                        <div class="small-screen-img" hidden>
                            {% if block.settings.image != blank %}
                                {%- assign icon = block.settings.image.src -%}
                                {%- assign img_url = icon | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}
                                <img class="lazyload"
                                     src="{{ icon | img_url: '50x' }}"
                                     srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
                                     data-src="{{ img_url }}"
                                     data-widths="[50, 100, 180, 360, 540, 720, 900, 1080, 1296, 1512, 1728, 2048]"
                                     data-sizes="auto"
                                     data-parent-fit="contain"
                                     alt="{{ icon.alt | default: 'Workout Meals ™' | escape }}">
                            {% endif %}
                        </div>
                        {% if block.settings.btn_text != blank %}
                            <a href="{{ block.settings.btn_link }}" class="btn std-btn btn-dark">
                                {{ block.settings.btn_text | escape }}
                            </a>
                        {% endif %}
                    </div>
                    <div class="step-image-wrapper">
                        {% if block.settings.image != blank %}
                            {%- assign icon = block.settings.image.src -%}
                            {%- assign img_url = icon | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}
                            <img class="lazyload"
                                 src="{{ icon | img_url: '50x' }}"
                                 srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
                                 data-src="{{ img_url }}"
                                 data-widths="[50, 100, 180, 360, 540, 720, 900, 1080, 1296, 1512, 1728, 2048]"
                                 data-sizes="auto"
                                 data-parent-fit="contain"
                                 alt="{{ icon.alt | default: 'Workout Meals ™' | escape }}">
                        {% endif %}
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
</section>


{% schema %}
    {
        "name": "Steps homepage",
        "max_blocks": 5,
        "settings": [
            {
                "type": "text",
                "id": "title",
                "label": "Title",
                "default": "How it works"
            },
            {
                "type": "select",
                "id": "image_position",
                "options": [
                    { "value": "left", "label": "Left"},
                    { "value": "right", "label": "Right"}
                ],
                "label": "Image position",
                "default": "right"
            },
            {
                "type": "radio",
                "id": "style_points",
                "label": "Style of points:",
                "options": [
                    { "value": "number", "label": "Numbers"},
                    { "value": "figure", "label": "Figures"}
                ],
                "default": "number"
            },
            {
                "type": "range",
                "id": "step_speed",
                "min": 1,
                "max": 15,
                "step": 1,
                "unit": "sec",
                "label": "Change step every",
                "default": 5
            }
        ],
        "blocks": [
            {
                "type": "step",
                "name": "Step",
                "settings": [
                    {
                        "type": "text",
                        "id": "step_title",
                        "label": "Heading"
                    },
                    {
                        "type": "textarea",
                        "id": "step_text",
                        "label": "Text"
                    },
                    {
                        "type": "text",
                        "id": "btn_text",
                        "label": "Button text"
                    },
                    {
                        "id": "btn_link",
                        "type": "url",
                        "label": "Button link"
                    },
                    {
                        "type": "image_picker",
                        "id": "image",
                        "label": "Image"
                    }
                ]
            }
        ],
        "presets": [
            {
                "category": "Steps sliders",
                "name": "Steps homepage",
                "blocks": [
                    {
                        "type": "step"
                    }
                ]
            }
        ]
    }
{% endschema %}
